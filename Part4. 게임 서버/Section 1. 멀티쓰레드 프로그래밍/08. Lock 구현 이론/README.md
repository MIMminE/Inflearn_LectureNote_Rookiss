# Section 1.8 < Lock 구현 이론 >

## Lock


**화장실에 이미 사람이 있다면??**

- 그냥 무작정 기다린다. 
**만약 안에 있는 사람이 오랜 시간 나오지 않는다면 시간적인 손해를 본다.**
- 일단 자리로 돌아갔다가 나중에 다시 와서 확인한다.
    
    **돌아간 직후 사람이 나올 수도 있고, 다시 돌아왔을 때 또 다른 사람이 이미 사용 중 일수도 있다.**
    
- 자리에 돌아가면서 직원에게 부탁하여 화장실이 비면 알려달라고 한다.
    
    **자신 입장에서는 효율적이지만, 직원에게 일이 추가적으로 생기게 된다.**
    

💡 **스레드의 ‘자리로 돌아간다’의 의미**

두 번째와 세 번째 사례에서 보면 일단 자리로 돌아간다는 내용이 있는데, 스레드 입장에서 이는 본인에게 할당된 CPU 코어를 사용할 수 있는 시간이 지나지 않았음에도 소유권을 반납하는 행위를 의미한다.

세 번째 경우에서는 소유권을 반납하면서 커널(운영체제)에게 부탁하여 특정 순간에 소유권을 돌려받는 것을 의미한다.


**Lock 구현도 위와 같은 상황과 굉장히 유사하게 설계한다.**

### SpinLock

위의 사례에서 ‘그냥 무작정 기다린다’에 해당하는 Lock 메커니즘이다.

Lock 된 영역에 접근하기 위해 무작정 기다리다가 Lock이 해제되면 진입하여 Lock를 건 이후 작업을 진행한다. (다음 시간에 배울 내용)

무작정 기다린다라는 말이 아무일도 하지 않는다는 의미가 아니라, CPU의 코어를 가지고 Lock이 해제되었는지를 무한정으로 확인하는 작업을 진행하는 것이므로 굉장히 큰 부하를 일으킨다.


```
인프런 Rookiss 강사님 로드맵 'C#과 유니티로 만드는 MMORPG 게임 개발 시리즈'에 대한 학습을 진행하면서 작성한 개인 기록용 강의노트입니다.
```
